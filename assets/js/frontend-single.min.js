function vicatna_form_init(){jQuery("form.cart:not(.vicatna-form-init),.variations_form:not(.vicatna-form-init),.vi-wcaio-sb-cart-form:not(.vicatna-form-init)").each((function(){jQuery(this).addClass("vicatna-form-init"),jQuery(this).find(".vicatna-nyp-wrap").length?jQuery(this).find(".single_add_to_cart_button, .vi-wcaio-product-bt-atc").addClass("vicatna-single-atc-button vicatna-nyp-single-atc-button-not-check"):jQuery(this).find(".vicatna-so-wrap .vicatna-so-button-checked").length?jQuery(this).find(".single_add_to_cart_button, .vi-wcaio-product-bt-atc").addClass("vicatna-single-atc-button vicatna-so-single-atc-button-checked"):jQuery(this).find(".vicatna-so-wrap").length&&vicatna_single.so_single_atc_label?jQuery(this).find(".single_add_to_cart_button, .vi-wcaio-product-bt-atc").addClass("vicatna-single-atc-button vicatna-so-single-atc-button-not-check"):jQuery(this).find(".vicatna-so-wrap").length&&jQuery(this).find(".single_add_to_cart_button, .vi-wcaio-product-bt-atc").addClass("vicatna-single-atc-button vicatna-so-single-atc-button-without-check")}))}function vicatna_show_message(a,t){if((a=jQuery(a)).closest(".vicatna-loop-wrap, .vicatna-popup-wrap, .vi-wcaio-va-cart-form-wrap-wrap, .vi-wcaio-sb-wrap, .wlb-product-wrapper").length||"fixed"===a.closest('[tabindex="-1"], .shortcode-wcpr-modal-light-box, .wcpr-modal-light-box').css("position"))return vicatna_show_message_popup(t),!1;let n=jQuery(".woocommerce-notices-wrapper");n.find(".vicatna-message-wrap").remove(),n.prepend('<div class="vicatna-message-wrap">'+t+"</div>"),n.find(".vicatna-message-wrap").addClass("vicatna-message-wrap-show"),jQuery.scroll_to_notices(n),setTimeout((function(){vicatna_hide_message()}),15e3)}function vicatna_hide_message(){jQuery(".woocommerce-notices-wrapper").find(".vicatna-message-wrap").animate({height:"0px",margin:"0 !important",padding:"0 !important"},400),setTimeout((function(){jQuery(".woocommerce-notices-wrapper").find(".vicatna-message-wrap").remove()}),400)}function vicatna_show_message_popup(a){jQuery(".vicatna-message-popup-wrap").length?(jQuery(".vicatna-message-popup-wrap").removeClass("vicatna-message-popup-wrap-hide").addClass("vicatna-message-popup-wrap-show"),jQuery(".vicatna-message-popup-wrap > div").html(a)):jQuery("body").append('<div class="vicatna-message-popup-wrap vicatna-message-popup-wrap-show"><div>'+a+"</div></div>"),setTimeout((function(){vicatna_hide_message_popup()}),5e3)}function vicatna_hide_message_popup(){jQuery(".vicatna-message-popup-wrap").addClass("vicatna-message-popup-wrap-hide").removeClass("vicatna-message-popup-wrap-show")}jQuery(document).ready((function(){"use strict";if("undefined"==typeof vicatna_single)return!1;setTimeout((function(){jQuery(document.body).trigger("vicatna_check_form")}),100),jQuery(document.body).on("vicatna_check_form",(function(){if(!jQuery("form.cart:not(.vicatna-form-init),.variations_form:not(.vicatna-form-init),.vi-wcaio-sb-cart-form:not(.vicatna-form-init)").length)return setTimeout((function(){jQuery(document.body).trigger("vicatna_check_form")}),100),!1;vicatna_form_init()})),jQuery(document.body).on("vicatna_nyp_check_price",(function(a,t,n){let i=n.find(".vicatna_nyp_value").val();if(!vicatna_single.nyp_free_purchase&&!i)return vicatna_show_message(n,vicatna_single.nyp_mess_empty),t.removeClass("vicatna-button-loading"),!1;if(vicatna_single.nyp_free_purchase&&(!i||"0"===i))return t.removeClass("vicatna-button-loading").addClass("vicatna-nyp-single-atc-button-checked").trigger("click"),!1;let e={price:i,price_min:n.find(".vicatna_nyp_value").attr("min"),price_max:n.find(".vicatna_nyp_value").attr("max"),product_id:n.find(".vicatna_nyp_value").attr("data-product_id"),language:vicatna_single.language,vicatna_nonce:vicatna_single.nonce};return jQuery.ajax({url:vicatna_single.wc_ajax_url.toString().replace("%%endpoint%%","vicatna_nyp_check_price"),type:"POST",data:e,success:function(a){if("error"===a.status&&t.removeClass("vicatna-button-loading"),a.message&&vicatna_show_message(n,a.message),"success"===a.status)return t.removeClass("vicatna-button-loading").addClass("vicatna-nyp-single-atc-button-checked").trigger("click"),!0},error:function(a){t.removeClass("vicatna-button-loading")}}),!1})),jQuery(document.body).on("vicatna_so_check_price",(function(a,t,n){let i=n.find(".vicatna_so_value").val(),e=jQuery(".vicatna-so-button.vicatna-button-loading").closest(".vicatna-form-init");if(!i)return vicatna_show_message(n,vicatna_single.so_mess_empty),t.removeClass("vicatna-button-loading"),t.closest(".vicatna-form-init").length&&e.find(".vicatna-button-loading").removeClass("vicatna-button-loading"),!1;let c={price:i,product_id:n.find(".vicatna_so_value").attr("data-product_id"),quantity:n.find(".vicatna-so-qty").val()&&(n.find('[name="quantity"]').val()||e.find('[name="quantity"]').val())||1,language:vicatna_single.language,vicatna_nonce:vicatna_single.nonce};return t.attr("data-so_bt_label",t.html()),jQuery.ajax({url:vicatna_single.wc_ajax_url.toString().replace("%%endpoint%%","vicatna_so_check_price"),type:"POST",data:c,beforeSend:function(){t.html(vicatna_single.so_mess_wait)},success:function(a){if("error"===a.status&&(t.removeClass("vicatna-button-loading"),t.closest(".vicatna-form-init").length&&e.find(".vicatna-button-loading").removeClass("vicatna-button-loading")),a.message&&vicatna_show_message(n,a.message),t.html(t.attr("data-so_bt_label")),"success"===a.status)return e.find(".vicatna-so-value-"+c.product_id).length?e.find(".vicatna-so-value-"+c.product_id).val(i):e.append('<input type="hidden" name="vicatna_so_value" class="vicatna-so-value-checked vicatna-so-value-'+c.product_id+'"  value="'+i+'">'),e.find(".vicatna-so-qty-min-"+c.product_id).length?e.find(".vicatna-so-qty-min-"+c.product_id).val(c.quantity):e.append('<input type="hidden" name="vicatna_so_qty_min" class="vicatna-so-qty-min-checked vicatna-so-qty-min-'+c.product_id+'" value="'+c.quantity+'">'),n.find('[name="quantity"]').val()&&e.find('[name="quantity"]').val(n.find('[name="quantity"]').val()),jQuery(".vicatna-so-button.vicatna-button-loading").closest(".vicatna-wrap").addClass("vicatna-disabled"),e.find(".vicatna-add-to-cart-label-wrap").length&&e.find(".vicatna-single-atc-button").html(e.find(".vicatna-add-to-cart-label-wrap").html()),e.find(".vicatna-single-atc-button").addClass("vicatna-so-single-atc-button-checked").removeClass("vicatna-button-loading").trigger("click"),!0},error:function(a){t.html(t.attr("data-so_bt_label")),t.removeClass("vicatna-button-loading"),e.find(".vicatna-single-atc-button").removeClass("vicatna-button-loading")}}),!1})),jQuery(document).on("ajaxComplete",(function(){return setTimeout((function(){jQuery(document.body).trigger("vicatna_check_form")}),100),!1})),jQuery(document).on("show_variation viwpvs_show_variation",".vicatna-form-init",(function(a,t,n){if(jQuery(this).find(".vicatna-wrap").html("").removeClass("vicatna-disabled"),jQuery(this).find(".single_add_to_cart_button, .vi-wcaio-product-bt-atc").addClass("vicatna-single-atc-button"),jQuery(this).find(".vicatna-single-atc-button").removeClass("vicatna-nyp-single-atc-button-not-check vicatna-so-single-atc-button-checked vicatna-so-single-atc-button-not-check"),jQuery(this).find(".vicatna-single-atc-button").attr("data-label")&&jQuery(this).find(".vicatna-single-atc-button").html(jQuery(this).find(".vicatna-single-atc-button").attr("data-label")),jQuery(this).find(".vicatna-so-value-checked,.vicatna-so-qty-min-checked").attr("name",""),jQuery(this).find(".vicatna-so-value-"+t.variation_id).attr("name","vicatna_so_value"),jQuery(this).find(".vicatna-so-qty-min-"+t.variation_id).attr("name","vicatna_so_qty_min"),!n)return!1;t.vicatna_nyp_html?(jQuery(this).find(".vicatna-nyp-wrap").length?jQuery(this).find(".vicatna-nyp-wrap").replaceWith(t.vicatna_nyp_html):jQuery(this).find(".woocommerce-variation-availability").after(t.vicatna_nyp_html),jQuery(this).find(".vicatna-single-atc-button").addClass("vicatna-nyp-single-atc-button-not-check")):t.vicatna_so_html&&(jQuery(this).find(".vicatna-so-wrap").length?jQuery(this).find(".vicatna-so-wrap").replaceWith(t.vicatna_so_html):jQuery(this).find(".woocommerce-variation-availability").after(t.vicatna_so_html),vicatna_single.so_single_atc_label&&(jQuery(this).find(".vicatna-so-wrap .vicatna-so-button-checked").length?jQuery(this).find(".vicatna-single-atc-button").addClass("vicatna-so-single-atc-button-checked"):jQuery(this).find(".vicatna-so-value-"+t.variation_id).length?(jQuery(this).find(".vicatna-single-atc-button").addClass("vicatna-so-single-atc-button-checked"),jQuery(this).find(".vicatna-so-wrap").addClass("vicatna-disabled")):(jQuery(this).find(".vicatna-single-atc-button").addClass("vicatna-so-single-atc-button-not-check"),jQuery(this).find(".vicatna-single-atc-button").attr("data-label",jQuery(this).find(".vicatna-single-atc-button").html()),jQuery(this).find(".vicatna-single-atc-button").html(vicatna_single.so_single_atc_label))))})),jQuery(document).on("hide_variation viwpvs_hide_variation",".vicatna-form-init",(function(){if(parseInt(jQuery(this).find(".variation_id").val()||0)>0)return!1;jQuery(this).find(".vicatna-wrap").html(""),jQuery(this).find(".single_add_to_cart_button, .vi-wcaio-product-bt-atc").addClass("vicatna-single-atc-button"),jQuery(this).find(".vicatna-single-atc-button").removeClass("vicatna-nyp-single-atc-button-not-check vicatna-so-single-atc-button-checked vicatna-so-single-atc-button-not-check"),jQuery(this).find(".vicatna-single-atc-button").attr("data-label")&&jQuery(this).find(".vicatna-single-atc-button").html(jQuery(this).find(".vicatna-single-atc-button").attr("data-label")),jQuery(this).find(".vicatna-so-value-checked,.vicatna-so-qty-min-checked").attr("name","")})),jQuery(document).on("keydown",".vicatna-value",(function(){jQuery(this).closest(".vicatna-form-init").find(".single_add_to_cart_button, .vi-wcaio-product-bt-atc").addClass("vicatna-single-atc-button"),jQuery(".vicatna-message-popup-wrap.vicatna-message-popup-wrap-show").length?vicatna_hide_message_popup():vicatna_hide_message(jQuery(this).closest(".vicatna-wrap").length?jQuery(this).closest(".vicatna-wrap"):jQuery(this).closest(".vicatna-popup-wrap"))})),jQuery(document).on("click",".single_add_to_cart_button.vicatna-single-atc-button:not(.vicatna-button-loading), .vicatna-single-atc-button:not(.vicatna-button-loading)",(function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();let t=jQuery(this),n=jQuery(this).closest(".vicatna-form-init");if(t.addClass("vicatna-button-loading"),!n.length||t.hasClass("disabled"))return t.removeClass("vicatna-button-loading"),!1;if(t.hasClass("vicatna-so-single-atc-button-without-check"))return n.find(".vicatna-value").attr({"data-step":n.find(".vicatna-value").attr("step"),step:"any"}),t.removeClass("vicatna-button-loading vicatna-single-atc-button").attr("type","submit").trigger("click"),!1;if(n.hasClass(".variations_form")){let a=parseInt(n.find("input[name=variation_id]").val()||0);if(!a||a<=0)return t.removeClass("vicatna-button-loading"),!1}return parseFloat(n.find('[name="quantity"]').val())?t.hasClass("vicatna-so-single-atc-button-checked")||t.hasClass("vicatna-nyp-single-atc-button-checked")?(jQuery(".vicatna-popup-overlay").trigger("click"),n.find(".vicatna-so-button").addClass("vicatna-disabled"),n.find(".vicatna-value").attr({"data-step":n.find(".vicatna-value").attr("step"),step:"any"}),t.removeClass("vicatna-button-loading vicatna-single-atc-button vicatna-nyp-single-atc-button-checked").attr("type","submit").trigger("click"),!1):(n.find(".vicatna-value").attr("data-step")&&n.find(".vicatna-value").attr("step",n.find(".vicatna-value").attr("data-step")),t.hasClass("vicatna-so-single-atc-button-not-check")?(n.find(".vicatna-so-button").trigger("click"),!1):t.hasClass("vicatna-nyp-single-atc-button-not-check")?(jQuery(document.body).trigger("vicatna_nyp_check_price",[t,n]),!1):(n.find(".vicatna-value").attr({min:"",max:""}),t.removeClass("vicatna-button-loading vicatna-single-atc-button").attr("type","submit").trigger("click"),!1)):(vicatna_show_message(n,vicatna_single.i18n_empty_qty),n.find('[name="quantity"]').focus(),t.removeClass("vicatna-button-loading"),!1)})),jQuery(document).on("click",".vicatna-so-button:not(.vicatna-button-loading)",(function(a){a.preventDefault(),a.stopPropagation();let t=jQuery(this),n=jQuery(this).data("product_id")||"",i=jQuery(this).closest(".vicatna-form-init");if(!i.length)return!1;if(n||(n=i.find(".variation_id").val()),!n||parseInt(n)<=0)return i.find(".vicatna-single-atc-button").removeClass("vicatna-button-loading").addClass("vicatna-so-single-atc-button-checked").trigger("click"),!1;if(t.addClass("vicatna-button-loading"),t.hasClass("vicatna-so-single-atc-button-checked")||i.find(".vicatna-so-qty-min-"+n).length)return i.find(".vicatna-single-atc-button").removeClass("vicatna-button-loading").addClass("vicatna-so-single-atc-button-checked").trigger("click"),!1;if(t.hasClass("vicatna-so-button-popup")){let a=jQuery(".vicatna-popup-wrap.vicatna-popup-wrap-so"),e=i.find(".vicatna-popup-so-value").data("val");return a.find(".vicatna-popup-form").attr({class:e.class_form,"data-product_id":n}),a.find(".vicatna-popup-form-header-wrap").html(e.popup_title),e.input_title?a.find(".vicatna-popup-form-content-price .vicatna-popup-form-content-title").html(e.input_title):(a.find(".vicatna-popup-form-content-price").addClass("vicatna-popup-form-content-center"),a.find(".vicatna-popup-form-content-price .vicatna-popup-form-content-title").addClass("vicatna-disabled")),a.find(".vicatna-popup-form-content-price .vicatna-popup-form-content-value").html(e.input_html),a.find(".vicatna-popup-form-content-qty .vicatna-popup-form-content-value").html(e.qty_html),a.find("[name=quantity]").val(i.find("[name=quantity]").val()||1),"undefined"!=typeof Flatsome&&jQuery(".quantity").addQty(),jQuery("html").addClass("vicatna-html-non-scroll"),a.removeClass("vicatna-disabled").css({left:"100%"}).animate({left:"0"},500),"fixed"===t.closest('[tabindex="-1"], .vi-wcaio-va-cart-form-wrap-wrap, .vi-wcaio-sidebar-cart, .shortcode-wcpr-modal-light-box, .wcpr-modal-light-box').css("position")&&t.closest('[tabindex="-1"], .vi-wcaio-va-cart-form-wrap-wrap, .vi-wcaio-sidebar-cart, .shortcode-wcpr-modal-light-box, .wcpr-modal-light-box').addClass("vicatna-popup-wrap-animate"),jQuery(".vicatna-popup-wrap-animate").animate({left:"-100%"},500).css({visibility:"hidden"}),!1}return jQuery(document.body).trigger("vicatna_so_check_price",[t,i]),!1})),jQuery(document).on("click",".vicatna-popup-wrap-so .vicatna-popup-form-bt:not(.vicatna-button-loading)",(function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();let t=jQuery(this),n=jQuery(this).closest(".vicatna-popup-wrap-so");return t.addClass("vicatna-button-loading"),jQuery(document.body).trigger("vicatna_so_check_price",[t,n]),!1})),jQuery(document).on("click",".vicatna-popup-overlay, .vicatna-popup-cancel",(function(a){jQuery("html").removeClass("vicatna-html-non-scroll");let t=jQuery(this).closest(".vicatna-popup-wrap");t.animate({left:"100%"},400),jQuery(".vicatna-popup-wrap-animate").removeClass("vicatna-popup-wrap-animate").css({visibility:"visible"}).animate({left:"0"},400),jQuery(".vicatna-button-loading").removeClass("vicatna-button-loading"),vicatna_hide_message_popup(),setTimeout((function(a){a.hasClass("vicatna-popup-wrap-non-ajax")?a.addClass("vicatna-disabled"):a.remove()}),400,t)}))}));